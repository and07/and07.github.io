<!-- http://cturt.github.io/ -->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" type="text/css" href="../../css/core.css" />
		<!--<link rel="stylesheet" type="text/css" href="css/application.css" />-->
        
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
        <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/highlight.js/9.0.0/styles/default.min.css"> -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/highlight.js/9.0.0/styles/railscasts.min.css">
        <script src="https://cdn.jsdelivr.net/highlight.js/9.0.0/highlight.min.js"></script>
        
		<title>Code</title>
	</head>
	
	<body>
		<div class="page">
			<div class="container">
				
				<h1>Code</h1>
				<hr>

                <h2>Find Count of Most Frequent Item in an Array</h2>
<div class="">
                <pre><code class="mbx">
function mostFrequentItemCount(collection) {
  var obj = {};
  for(var i = 0; i < collection.length; i++){
     if(!obj[collection[i]])obj[collection[i]] =0;
     obj[collection[i]] += 1;
  }
  var max =0;
  for(var k in obj){
    if(obj[k] > max)max = obj[k];
  }
  
  return max;
}
                </code></pre>		
</div>
				<br>
                <h2>Double Cola</h2>
<div class="">
                <pre><code class="mbx">
function whoIsNext(names, r){
  var i = 0;
  var j = 1;
  var k = names.length;
   
  while (i <= r){
      i += k;
      k += k;
      j += j;
  }
  var res = Math.ceil((r - (i - k * 0.5)) / (j * 0.5));
  return names[parseInt(res - 1)]
}
                </code></pre>		
</div>
				<br>

                <h2>Dependency Injection</h2>
<div class="">
                <pre><code class="javascript">
/**
 * Constructor DependencyInjector
 * @param {Object} - object with dependencies
 */
var DI = function (dependency) {
  this.dependency = dependency;
};

// Should return new function with resolved dependencies
DI.prototype.inject = function (func) {

  var self = this;

  if(typeof(func) == 'function'){
    var deps = func.toString().match(/^function\s*[^\(]*\(\s*([^\)]*)\)/m)[1].replace(/ /g, '').split(',');
    var arg = [];
    for(var i in deps){
    if(this.dependency[deps[i]])
      arg.push(this.dependency[deps[i]]);
    }
    console.log(arg.length);
    return function(){ return func.apply(func, arg)};
   }else{ 
    return 1;
    }
 
}
                </code></pre>		
</div>
				<br> 
                <h2>Decorator</h2>
<div class="">
        <pre><code class="javascript">
function Decorator(options) {
  if (!options) {
    options = {};
  }
  this.before = options.before || null;
  this.after = options.after || null;
}

Decorator.prototype.decorate = function decorate(fn) {
  if(typeof(arguments[0]) === 'function') fn = arguments[0];
  var _arg = Array.prototype.splice.call(arguments, 1);
  var self = this;
  return function(){
    var arg = Array.prototype.splice.call(arguments,0);
    var res = self.before ? fn.apply(null, self.before.apply(null, _arg.concat(arg))) : fn.apply(null,arg);  
    res = self.after ?  self.after.apply(null, _arg.concat(res)) : res;
    return res;
  }
};
        </code></pre>	
</div>
				<br> 
                <h2>Module</h2>
<div class="">
        <pre><code class="javascript">
var basketModule = (function () {
 
  // privates
 
  var basket = [];
 
  function doSomethingPrivate() {
    //...
  }
 
  function doSomethingElsePrivate() {
    //...
  }
 
  // Return an object exposed to the public
  return {
 
    // Add items to our basket
    addItem: function( values ) {
      basket.push(values);
    },
 
    // Get the count of items in the basket
    getItemCount: function () {
      return basket.length;
    },
 
    // Public alias to a  private function
    doSomething: doSomethingPrivate,
 
    // Get the total value of items in the basket
    getTotal: function () {
 
      var q = this.getItemCount(),
          p = 0;
 
      while (q--) {
        p += basket[q].price;
      }
 
      return p;
    },
    onSetName: function(){
        alert('setName');
    }
  };
})();
</code></pre>
                </code></pre>		
</div>
				<br> 
                <h2>Native Javascript Data Binding</h2>
<div class="">
                <pre><code class="javascript">
    function is_null( mixed_var ){	// Finds whether a variable is NULL
        // 
        // +   original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
        return ( mixed_var === null );
    };
    function setValDomElem(domElem,newValue){
        if(domElem.length){
            for(var i in domElem){
                    var tag = domElem[i].tagName|| null;
                    if(is_null(tag))
                        continue;
                    tag = tag.toLowerCase();
                    if(tag == 'input' || tag == 'textarea' || tag == 'select'){
                        domElem[i].value = newValue;
                    }else{
                        domElem[i].innerHTML = newValue;
                    }
            }
        }else{
            var tag = domElem.tagName.toLowerCase() || null;
            if(tag == 'input' || tag == 'textarea' || tag == 'select'){
                domElem.value = newValue;
            }else{
                domElem.innerHTML = newValue; 
            }
        }

    };
    function bindModelInput(obj, property, domElem) { 
        Object.defineProperty(obj, property, {
            get: function() { return this['_'+property];  },
            set: function(newValue) { this['_'+property] = newValue; setValDomElem(domElem, newValue); },
            enumerable: false,
            configurable: true 
        }); 
    }; //< input id="foo" > 
    user = {};
    bindModelInput(user,'name', document.querySelectorAll('#foo'));
                </code></pre>		
</div>
				<br> 
                <h2>Mediator</h2>
<div class="">
        <pre><code class="javascript">
"use strict";

var Mediator = function() {
        
        var debug = function() {
            // console.log or air.trace as desired
        };
        
        var components = {};
        
        var broadcast = function(event, args, source) {
            if (!event) {
                return;
            }
            args = args || [];
            //debug(["Mediator received", event, args].join(' '));
            for (var c in components) {
                if (typeof components[c]["on" + event] == "function") {
                    try {
                        //debug("Mediator calling " + event + " on " + c);
                        source = source || components[c];
                        components[c]["on" + event].apply(source, args);
                    } catch (err) {
                        debug(["Mediator error.", event, args, source, err].join(' '));
                    }
                }
            }
        };
        
        var addComponent = function(name, component, replaceDuplicate) {
            if (name in components) {
                if (replaceDuplicate) {
                    removeComponent(name);
                } else {
                    throw new Error('Mediator name conflict: ' + name);
                }
            }
            components[name] = component;
        };
        
        var removeComponent = function(name) {
            if (name in components) {
                delete components[name];
            }
        };
        
        var getComponent = function(name) {
            return components[name]; // undefined if component has not been added
        };
        
        var contains = function(name) {
            return (name in components);
        };
        
        return {
            name      : "Mediator",
            broadcast : broadcast,
            add       : addComponent,
            rem       : removeComponent,
            get       : getComponent,
            has       : contains
        };
    }();

                </code></pre>		
</div>
				<br> 
                <h2></h2>
<div class="">
        <pre><code class="javascript">

        </code></pre>		
</div>
				<br> 
                <h2></h2>
<div class="">
        <pre><code class="javascript">
        
        </code></pre>		
</div>
				<br> 
                <h2></h2>
<div class="">
        <pre><code class="javascript">

        </code></pre>		
</div>
				<br> 
                <h2></h2>
<div class="">
        <pre><code class="javascript">

        </code></pre>		
</div>
				<br> 
                <h2></h2>
<div class="">
        <pre><code class="javascript">
        </code></pre>		
</div>
				<br> 
                <h2></h2>
<div class="">
        <pre><code class="javascript">
        </code></pre>		
</div>
			</div>
		</div>
	</body>
<script>
$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
</script>    
</html>